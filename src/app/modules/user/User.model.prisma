model User {
  id         String   @id @default(uuid())
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  is_deleted Boolean  @default(false)

  //! auth
  role        EUserRole @default(USER)
  email       String?
  phone       String?
  password    String
  is_verified Boolean   @default(false)
  is_active   Boolean   @default(false)
  is_admin    Boolean   @default(false)
  otp_id      Int       @default(0)

  onesignal_id String? // For push notifications

  // only for admin verification
  is_verification_pending Boolean?
  //! end

  //! profile
  avatar         String   @default("/images/placeholder.png")
  capture_avatar String? // Not shown, just for verification
  name           String   @default("Pathao User")
  date_of_birth  DateTime @default(now())
  gender         EGender  @default(OTHER)
  nid_photos     String[]
  //! end

  //! driver
  driving_license_photos      String[]
  vehicle_type                String?
  vehicle_brand               String?
  vehicle_model               String?
  vehicle_plate_number        String?
  vehicle_registration_photos String[]
  vehicle_photos              String[]
  //! end

  //! trip history
  trip_given_count    Int @default(0) // for drivers
  trip_received_count Int @default(0) // for users
  //! end

  //! payment
  stripe_account_id   String?
  is_stripe_connected Boolean @default(false)
  //! end

  //! rating
  rating       Float @default(5.0)
  rating_count Int   @default(0)
  //! end

  //! location
  location_type    String? @default("Point")
  location_lat     Float?
  location_lng     Float?
  location_address String?
  //! end

  //! online status
  is_online      Boolean   @default(false)
  last_online_at DateTime? @default(now())
  //! end

  wallet           Wallet?       @relation("UserWallet")
  transactions     Transaction[]
  user_parcels     Parcel[]      @relation("UserParcel")
  driver_parcels   Parcel[]      @relation("DriverParcel")
  user_trips       Trip[]        @relation("UserTrip")
  driver_trips     Trip[]        @relation("DriverTrip")
  given_reviews    Review[]      @relation("ReviewerReviews")
  received_reviews Review[]      @relation("UserReviews")
  chats            Chat[]        @relation("UserChats")
  seen_messages    Message[]     @relation("SeenMessages")
  messages         Message[]

  @@index([location_lat, location_lng])
  @@map("users")
}

enum EUserRole {
  USER
  DRIVER
}

enum EGender {
  MALE
  FEMALE
  OTHER
}
